const body=document.querySelector("body"),h1=document.createElement("h1"),h2=document.createElement("h2");h1.innerText="ITUNES SEARCH",h2.innerText="";const input=document.createElement("input");input.type="text";const button=document.createElement("button");button.classList="btn btn-primary m-2",button.id="button",button.innerText="pretraÅ¾i";const table=document.createElement("table"),tbody=document.createElement("tbody");function updateTable(e){tbody.innerHTML="",0===e.length?h2.innerText="no results":(h2.innerText="",e.forEach((e=>{const t=document.createElement("tr"),n=document.createElement("td");n.innerText=e.trackName,t.appendChild(n);const o=document.createElement("td");o.innerText=e.artistName,t.appendChild(o);const c=document.createElement("td"),d=document.createElement("audio"),a=document.createElement("source");a.src=e.previewUrl,d.controls=!0,d.appendChild(a),c.appendChild(d),t.appendChild(c),tbody.appendChild(t)})))}table.append(tbody),body.append(h1),body.append(h2),body.append(input),body.append(button),body.append(table),input.addEventListener("input",(function(){const e=input.value;""===e.trim()?updateTable([]):fetch(`https://itunes.apple.com/search?term=${e}&entity=song`).then((e=>e.json())).then((e=>{console.log(e),updateTable(e.results)})).catch((e=>{console.log(e)}))})),button.addEventListener("click",(function(){const e=input.value;""===e.trim()?h2.innerText="no results":(button.disabled=!0,fetch(`https://itunes.apple.com/search?term=${e}&entity=song`).then((e=>e.json())).then((e=>{console.log(e),updateTable(e.results)})).catch((e=>{console.log(e)})).finally((()=>{button.disabled=!1})))}));